<div class="container" style="margin-top: 10px;">
  <h3 align="center">Dashboard</h3>
</div>

<div class="container" class="tab-content" align="center">

  <div class="tab-pane fade in show active" id="request">
    <h4>Requests sent</h4>
    <div id="map"
     style="width: 800px; height: 300px;"
     data-markers="<%= @markers.to_json %>"
     data-start-point="<%= @start_point %>"
     data-meet-point="<%= @meet_point %>"
     data-mapbox-api-key="<%= ENV['MAPBOX_API_KEY'] %>"></div>
    <% if @my_walk_request %>
    <div class="card mt-4" style="width: 800px;height: 180px">
      <div class="card-body d-flex justify-content-between align-items-center">
        <%= cl_image_tag @my_buddy.photo.key, :style => "width: 100px; height: 100px;" %>
        <div>
          <p id = "text-dashboard">Buddy: <%= @my_buddy.name %></p>
          <p id="text-dashboard">Meeting point: <%= @my_walk_request.meeting_point %></p>
          <%= link_to 'Getting there' ,walk_path(@my_walk_request), :style => "color: #167FFB;" %>
        </div>
        <p id = "text-dashboard">Request status: <%= @my_walk_request.walk_request_status %></p>
        <% if @my_walk_request.walk_request_status == "Confirmed" %>
          <p><%= @my_walk_request.pin %></p>
        <% end %>
      </div>
    </div>
    <% end %>
  </div>

  <div class="tab-pane fade" id="incoming">
    <h4>Requests received</h4>
    <% if @walk_request_received %>
    <div class="card mt-4" style="width: 800px;height: 180px">
      <div class="card-body d-flex justify-content-between align-items-center">
        <%= cl_image_tag @requester.photo.key, :style => "width: 100px; height: 100px;" %>
        <div>
          <p>Requester: <%= @requester.name %> </p>
          <p class="card-text">Meeting point: <%= @walk_request_received.meeting_point %></p>
        </div>
        <% case @walk_request_received.walk_request_status %>
        <% when "Pending" %>
          <p class="button"><%= link_to 'Accept', walk_path(@walk_request_received, format: 'Confirmed'), method: 'PATCH' %></p>
          <p class="button"><%= link_to 'Decline', walk_path(@walk_request_received, format: 'Declined'), method: 'PATCH' %></p>
        <% when "Cancelled" %>
          <p><%= @walk_request_received.walk_request_status %></p>
        <% when "Confirmed" %>
          <p><%= @walk_request_received.walk_request_status %></p>
          <p class="card-text">PIN: <%= @walk_request_received.pin %></p>
          <p class="button"><%= link_to 'Cancel', walk_path(@walk_request_received, format: 'Cancelled'), method: 'PATCH' %></p>
        <% else %>
          <p><%= @walk_request_received.walk_request_status %></p>
        <% end %>
      </div>
    </div>
    <% end %>
  </div>

  <div>
    <ul class="nav nav-pills justify-content-center" style="margin: 30px 150px 30px 150px;">
      <li class="nav-item">
        <a class="nav-link active" data-toggle="tab" href="#request" id="tab-dashboard">Request</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" data-toggle="tab" href="#incoming" id="tab-dashboard">Incoming</a>
      </li>
    </ul>
  </div>
</div>
